<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Willem Sleegers">
    <meta name="description" content="Personal website of Willem Sleegers">
    <meta name="generator" content="Hugo 0.20.2" />

    
    <title>Importing multiple data files &middot; @willemsleegers’s website</title>

    <link rel="stylesheet" href="/css/font-awesome.min.css">

    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/academicons.min.css">
    <link rel="stylesheet" href="/css/weblog.css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="/css/my_css.css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.2.14/css/lightgallery.min.css" type="text/css" />

    


    
	<link href="/index.xml" rel="alternate" type="application/rss+xml" title="website" />
	
  </head>
  <body class="site">

<header>
  <nav>
    <h1><a href="/">@willemsleegers</a>’s website</h1>
    <div class="menu">
      
      <ul>
        
            <li>
              <a href="/posts/">Posts</a>
              
                <a href="/posts/index.xml"><img src="/img/rss.svg" class="rss-icon" /></a>
              
            </li>
        
            <li>
              <a href="/publications/">Publications</a>
              
            </li>
        
            <li>
              <a href="/talks/">Talks</a>
              
            </li>
        
            <li>
              <a href="/cv/">CV</a>
              
            </li>
        
      </ul>
    </div>
  </nav>
</header>


  <main class="content">

    <article class="post">
      
        <h2><a rel="full-article" href="/posts/importing-multiple-data-files/">Importing multiple data files</a></h2>
      

      <div class="postmeta">Posted on <time datetime="2017-06-02 00:00:00 &#43;0000 UTC" pubdate="">June 2, 2017</time> in
        <span class="tags">
          
            <a class="tag" href="/tags/r">R</a>, 
          
            <a class="tag" href="/tags/eye-tracking">eye tracking</a>
          
        </span>
      </div>

      <p>
        <p>Combining multiple data files is a regular problem for certain researchers, including myself. In my eye tracker research I collect data for each participant separately. This means that when I want to start preparing my data, I first need to combine the data into one large data frame.</p>
<p>There are many ways to combine separate data files in R. You can read in each file separately and store the result in their own data frame, after which you merge them together. Depending on the number of files, this might be feasible. In cases where you have many files, this is not. You can also create a <code>for</code> loop to loop across all the files and merge the data of each file into one data frame. This is an attractive solution, but R is not really made for <code>for</code> loops. Instead, functions such as <code>lapply()</code> can be used.</p>
<p>But I recently discovered a better <a href="https://github.com/STAT545-UBC/Discussion/issues/398">way</a> that also fits nicely in my preferred usage of R: the <a href="http://tidyverse.org">tidyverse</a>. Using the <code>tidyverse</code> package, you can read in multiple data files like this:</p>
<pre class="r"><code># Read in all files in the current working directory and store the result in &#39;data&#39;
list.files() %&gt;%
    map_df(read_tsv) -&gt; data</code></pre>
<p><code>list.files()</code> returns a vector containing the file names of the files in your current working directory. This vector is piped into <code>map_df()</code> with the pipe operator, <code>%&gt;%</code>. <code>map_df()</code> loops over each of these files, reads in the data with the supplied function (in this case <code>read_tsv()</code>), and automatically combines the results into one data frame, which I store in a variable called <code>data</code>.</p>
<p>This code works if you are already in the correct working directory. If you do not want to set the working directory, you can add the <code>path</code> argument to <code>list.files()</code> and also set <code>full.names</code> to <strong>TRUE</strong>. This latter argument will make <code>list.files()</code> return the paths to the files you want to read in, rather than just the file names, which is needed for the function to import the data into R.</p>
<p>This is my new favorite way of reading in multiple data files.</p>

      </p>
    </article>


  </main>

<footer>
  <div class="footer_text">
      <div>
        <h3>Hi, <a href="">I'm Willem</a></h3>
        <p>
          

<div class="bio">I'm an Assistant Professor in the Social Psychology department of Tilburg University. My research is on the topic of false beliefs, pupillometry, and experimental design more generally. On this website I post about my research and share data and code related to my work.</div>

<ul class="social-icon" aria-hidden="true">
        
        
        <li>
          <a itemprop="sameAs" href="mailto:w.w.a.sleegers@uvt.nl" target="_blank">
            <i class="fa fa-envelope big-icon"></i>
          </a>
        </li>
        
        
        <li>
          <a itemprop="sameAs" href="//twitter.com/willemsleegers" target="_blank">
            <i class="fa fa-twitter big-icon"></i>
          </a>
        </li>
        
        
        <li>
          <a itemprop="sameAs" href="https://scholar.google.nl/citations?user=EgqxL0MAAAAJ&amp;hl=en" target="_blank">
            <i class="ai ai-google-scholar big-icon"></i>
          </a>
        </li>
        
        
        <li>
          <a itemprop="sameAs" href="//github.com/willemsleegers" target="_blank">
            <i class="fa fa-github big-icon"></i>
          </a>
        </li>
        
</ul>


        </p>
      </div>
      
  </div>

  
    <div class="footer_copyright">
      &copy; 2017 <a href="">Willem Sleegers</a>
      
    </div>
  
</footer>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.2.14/js/lightgallery-all.min.js" charset="utf-8"></script>
    <script src="/js/weblog.js" charset="utf-8"></script>
    

    <script type="text/javascript">

  
  $(function() {
    
    $.getJSON("https://api.flickr.com/services/feeds/photos_public.gne?id=&format=json&jsoncallback=?", function(data) {
      iweblog.application.displayImages(data, 8);
    });
  });

</script>

    

    <link rel="stylesheet" href="//css/highlight styles/xcode.css">
    <script src="//js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

